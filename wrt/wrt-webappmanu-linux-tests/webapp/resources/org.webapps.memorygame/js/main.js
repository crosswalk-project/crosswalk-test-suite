Card=function(){this.cardId="",this.cardFrontId="",this.cardGraphics="",this.cardType=-1,this.found=!1},Game={};var normalCardImages=["images/noglow_balloon.png","images/noglow_butterflies.png","images/noglow_crown.png","images/noglow_cup.png","images/noglow_elephant.png","images/noglow_guitar.png","images/noglow_horn.png","images/noglow_lion.png","images/noglow_moon.png","images/noglow_sun.png","images/noglow_zebra.png","images/noglow_blank.png"],glowingCardImages=["images/card_flip_balloon.png","images/card_flip_butterflies.png","images/card_flip_crown.png","images/card_flip_cup.png","images/card_flip_elephant.png","images/card_flip_guitar.png","images/card_flip_horn.png","images/card_flip_lion.png","images/card_flip_moon.png","images/card_flip_sun.png","images/card_flip_zebra.png","images/card_flip_blank.png"],stariconsList=["images/purple_star.png","images/green_star.png","images/red_star.png"],audioItems=["flipcard_sound1","flipcard_sound2","startGame_sound","finaleIntro_sound","winLevel_sound","victory_sound"],audioSrc=["audio/FlipCard.wav","audio/FlipCard.wav","audio/StartPage.wav","audio/TheFinale.wav","audio/WinLevel.wav","audio/YouWin.wav"],SOUND_FLIPCARD1=0,SOUND_FLIPCARD2=1,SOUND_STARTGAME=2,SOUND_FINALEINTRO=3,SOUND_LEVEL_WON=4,SOUND_VICTORY=5,LOCKED_LEVELCARD_STYLE="setLevel_lockedLevel",SHOWCARD_STYLE="flip_to_visible",GAMES_PER_LEVEL=3,LOCAL_STORAGE_KEY="memorygame_locked_levels";!function(){function a(a){var b=document.createElement("audio");b.setAttribute("id",audioItems[a]),b.setAttribute("src",audioSrc[a]),a==SOUND_STARTGAME?(b.setAttribute("preload","auto"),b.setAttribute("autoplay","autoplay")):b.setAttribute("preload","none"),document.body.appendChild(b)}function b(a){var b=document.getElementById(audioItems[a]);b.pause(),b.play()}function c(){var a=new CurvedTextDrawer(document.getElementById("curvedText")),b=a.getCanvasCenterPos();b.mY=-625,a.useFont="70px Romantiques",a.drawSectorArc("YOU WIN",b.mX,b.mY,780,180,270,"ccw",!0,"center"),$("#homebutton_backtomain").hide()}function d(){console.log("--> prepareSelectLevelScreen()");for(var a=localStorage.getItem(LOCAL_STORAGE_KEY),b=1;b<x.length;++b){void 0!=a&&null!=a&&a.length>b?(console.log("    read data: "+a),x[b]="0"==a[b]?!1:!0):x[b]=!0;var c=$("#selLevel_levelCard"+(b+1));c.removeClass(LOCKED_LEVELCARD_STYLE),x[b]&&c.addClass(LOCKED_LEVELCARD_STYLE)}console.log("<-- prepareSelectLevelScreen()")}function e(){console.log("--> saveStatus()");for(var a="0",b=1;b<x.length;++b)x[b]?(console.log("    level: "+b+", lock: locked"),a+="1"):(console.log("    level: "+b+", lock: unlocked"),a+="0");console.log("    data: "+a),localStorage.setItem(LOCAL_STORAGE_KEY,a),console.log("<-- saveStatus()")}function f(a){for(var b=0;b<p.length;++b){var c=p[b];if(c.cardId==a)return c}return void 0}function g(a,b){a.found=!0,b.found=!0;var c=a.cardType;$(a.cardId).children(".back").css("visibility","hidden"),$(b.cardId).children(".back").css("visibility","hidden"),$(a.cardFrontId).css("background","url("+glowingCardImages[c]+")"),$(b.cardFrontId).css("background","url("+glowingCardImages[c]+")")}function h(){for(var a=0;a<p.length;++a){var b=p[a];if(0==b.found)return!1}return!0}function i(){if(console.log("--> Game.flipCallback()"),void 0==s)s=t,t=void 0,r=!1;else{var a=f("#"+s.attr("id")),b=f("#"+t.attr("id"));a.cardType==b.cardType?(g(a,b),h()&&l(),r=!1,s=void 0,t=void 0):(console.log("    no match"),window.setTimeout("Game.flipDelayCallback()",300))}console.log("<-- Game.flipCallback()")}function j(){r=!1,s.removeClass(SHOWCARD_STYLE),t.removeClass(SHOWCARD_STYLE),s=void 0,t=void 0}function k(a){console.log("--> shuffleLevel1()");for(var b=new Array,c=0;c<a.length;++c)b.push(Math.floor(c/2)%normalCardImages.length);for(var c=0;c<b.length;++c){var d=Math.floor(11*Math.random()),e=b[d];b[d]=b[c],b[c]=e}for(var c=0;c<a.length;++c){var f=b.pop(),g=a[c];g.cardType=f,console.log("elementId: "+g.cardFrontId+",    graphics: "+normalCardImages[f]),$(g.cardFrontId).css("background","url("+normalCardImages[f]+")"),$(g.cardId).removeClass(SHOWCARD_STYLE)}console.log("<-- shuffleLevel1()")}function l(){if(console.log("--> gotoNextGame()"),4==u)return x[0]=!1,x[1]=!1,x[2]=!1,x[3]=!1,e(),c(),a(SOUND_VICTORY),b(SOUND_VICTORY),$("#level4").hide(),void $("#victory").show();v++;var d=u;v>=GAMES_PER_LEVEL&&(v=0,d++,x[u]=!1,4!=d&&b(SOUND_LEVEL_WON)),4==d?(x[3]=!1,a(SOUND_FINALEINTRO),b(SOUND_FINALEINTRO),$("#homebutton_backtomain").hide(),$("#handitem").hide(),$("#level3").hide(),$("#finaleIntro").show()):n(d,!1),e(),console.log("<-- gotoNextGame()")}function m(){console.log("--> levelSelectionAnimCallback()"),$("#selLevel_page").hide(),$("#selLevel_levelCard1").removeClass("selLevel_selectedCard selLevel_anim1 selLevel_anim2 selLevel_anim3 selLevel_anim4"),$("#selLevel_levelCard2").removeClass("selLevel_selectedCard selLevel_anim1 selLevel_anim2 selLevel_anim3 selLevel_anim4"),$("#selLevel_levelCard3").removeClass("selLevel_selectedCard selLevel_anim1 selLevel_anim2 selLevel_anim3 selLevel_anim4"),$("#selLevel_levelCard4").removeClass("selLevel_selectedCard selLevel_anim1 selLevel_anim2 selLevel_anim3 selLevel_anim4"),n(q,!0),b(SOUND_LEVEL_WON),console.log("<-- levelSelectionAnimCallback()")}function n(a,b){console.log("--> startGame()"),b&&(passGames=0);var c="url(images/card_purple.png)";p=new Array,u=a;var d=12;2==a?(d=18,c="url(images/card_green.png)"):3==a?(d=24,c="url(images/card_red.png)"):4==a&&(d=24,c="url(images/card_teal.png)");for(var e=0;d>e;++e){var f=new Card;f.cardFrontId="#level"+a+"_card_"+(e+1)+"_front",f.cardId="#"+$(f.cardFrontId).parent().attr("id"),p.push(f),$(f.cardId).children(".back").css("visibility","visible")}setTimeout(function(){k(p)},300),$(".card").removeClass(SHOWCARD_STYLE),s=void 0,t=void 0;for(var g=stariconsList[a-1],h=0;3>h;++h){var i=$("#handleitem_star"+(h+1));i.removeClass("unplayedGameStar"),v>=h?i.attr("src",g):(i.addClass("unplayedGameStar"),i.attr("src","images/star.png"))}4!=a?$("#handitem").css("display","block"):$("#handitem").hide();for(var e=1;5>e;++e)e==a?$("#level"+e).show():$("#level"+e).hide();0==v?$("#handitem_gamenum_title").text("GAME 1"):1==v?$("#handitem_gamenum_title").text("GAME 2"):2==v&&$("#handitem_gamenum_title").text("GAME 3"),$("#homebutton_backtomain").show(),console.log("<-- startGame()")}function o(){d(),$("#main_page").is(":visible")&&($("#main_page").hide(),$("#selLevel_page").show()),license_init("license","pagebg"),help_init("main_help","help_"),a(SOUND_FLIPCARD1),a(SOUND_FLIPCARD2),a(SOUND_LEVEL_WON)}var p=new Array,q=-1,r=!1,s=void 0,t=void 0,u=-1,v=0,w=SOUND_FLIPCARD2,x=[!1,!0,!0,!0];Game.flipCallback=i,Game.flipDelayCallback=j,Game.gotoNextGame=l,Game.levelSelectionAnimCallback=m,Game.introViewSkipCallback=o,$(document).ready(function(){console.log("--> document.ready()"),a(SOUND_STARTGAME),$("#main_page").click(function(){o()}),$("#selLevel_levelCard1").click(function(){q=1,b(SOUND_FLIPCARD2),$("#selLevel_levelCard1").addClass("selLevel_selectedCard"),$("#selLevel_levelCard2").addClass("selLevel_anim1"),$("#selLevel_levelCard3").addClass("selLevel_anim1"),$("#selLevel_levelCard4").addClass("selLevel_anim1"),window.setTimeout("Game.levelSelectionAnimCallback()",1e3)}),$("#selLevel_levelCard2").click(function(){0==$(this).hasClass(LOCKED_LEVELCARD_STYLE)&&(b(SOUND_FLIPCARD2),q=2,$("#selLevel_levelCard2").addClass("selLevel_selectedCard"),$("#selLevel_levelCard1").addClass("selLevel_anim2"),$("#selLevel_levelCard3").addClass("selLevel_anim2"),$("#selLevel_levelCard4").addClass("selLevel_anim2"),window.setTimeout("Game.levelSelectionAnimCallback()",1e3))}),$("#selLevel_levelCard3").click(function(){0==$(this).hasClass(LOCKED_LEVELCARD_STYLE)&&(b(SOUND_FLIPCARD2),q=3,$("#selLevel_levelCard3").addClass("selLevel_selectedCard"),$("#selLevel_levelCard1").addClass("selLevel_anim3"),$("#selLevel_levelCard2").addClass("selLevel_anim3"),$("#selLevel_levelCard4").addClass("selLevel_anim3"),window.setTimeout("Game.levelSelectionAnimCallback()",1e3))}),$("#selLevel_levelCard4").click(function(){0==$(this).hasClass(LOCKED_LEVELCARD_STYLE)&&(b(SOUND_FLIPCARD2),q=4,$("#selLevel_levelCard4").addClass("selLevel_selectedCard"),$("#selLevel_levelCard1").addClass("selLevel_anim4"),$("#selLevel_levelCard2").addClass("selLevel_anim4"),$("#selLevel_levelCard3").addClass("selLevel_anim4"),window.setTimeout("Game.levelSelectionAnimCallback()",1e3))}),$(".card").click(function(){console.log("--> card.click()"),r||$(this).hasClass(SHOWCARD_STYLE)||(w=w==SOUND_FLIPCARD1?SOUND_FLIPCARD2:SOUND_FLIPCARD1,a(SOUND_FLIPCARD1),b(w),t=$(this),r=!0,console.log("    card id: "+$(this).attr("id")),$(this).addClass(SHOWCARD_STYLE),window.setTimeout("Game.flipCallback()",350)),console.log("<-- card.click()")}),$("#finaleIntro").click(function(){$("#finaleIntro").hide(),n(4,!1)}),$("#victory_playagain_box").click(function(){console.log("--> victory_playagain_box.click()"),d(),$("#victory").hide(),$("#selLevel_page").show(),console.log("<-- victory_playagain_box.click()")}),$("#homebutton_backtomain").click(function(){console.log("--> homebutton.click()"),$("#level1").hide(),$("#level2").hide(),$("#level3").hide(),$("#level4").hide(),$("#handitem").hide(),$("#main_page").show(),$(this).hide(),console.log("<-- homebutton.click()")}),$("#selLevel_resetLocked").click(function(){localStorage.setItem(LOCAL_STORAGE_KEY,"0000"),d()}),scaleBody(document.getElementsByTagName("body")[0],720)}),window.setTimeout("Game.introViewSkipCallback()",3500)}();